@import compass/css3
@import compass/utilities
@import ifkit/position
@import ifkit/form_reset
@import ifkit/normalize

// == Constants ===============================================================

// Dimensions
$page-width: 1024px          // Full page width
$left-column: 225px          // The left side with the logo
$nav-column: 160px           // Little section navigations
$nav-height: 36px
$nav-offset: 70px
$card-width: 420px

// Color swatches
$bg: #fff
$line: #ddd
$menu-bg: #fafafa

// Text swatches
$txt: #585858                // Text color
$black: #222

// Paths
$snap-in: cubic-bezier(.85,.5,.95,.15)
$snap-out: cubic-bezier(.85,.85,.15,.95)

/* == Basic reset ============================================================= */

@import compass/reset

/* == Form elements reset ===================================================== */

@include if-form-reset

/* == Shared classes ========================================================== */

/* Page */
%page
  +box-sizing(border-box)
  width: $page-width
  margin: 0 auto

/* Type: Exo 100 */
%exo-100
  font-family: exo, 'helvetica neue', sans-serif
  font-weight: 100

/* Type: Exo 100 caps */
%exo-100-caps
  @extend %exo-100
  letter-spacing: 1px
  text-transform: uppercase

/* Type: Armata 700 caps */
%armata-700-caps
  font-family: armata, sans-serif
  font-weight: 700
  text-transform: uppercase
  letter-spacing: -1px

/* Type: Exo 700 caps */
%exo-700-caps
  font-family: exo, sans-serif
  font-weight: 700
  text-transform: uppercase
  letter-spacing: 1px

/* Heading type */
%heading-type
  @extend %exo-100-caps
  color: #aaa
  text-shadow: 2px 2px 0 rgba(black, 0.08)

/* Clearfix */
%clearfix
  +pie-clearfix

@mixin flipme($y: 30px, $scale: 1.0)
  +transition(transform 300ms ease, opacity 300ms linear)
  -webkit-backface-visibility: hidden

  &.enter
    opacity: 0
    +transform(translate(0, -$y) perspective(200px) rotateX(90deg) scale($scale))
  &.exit
    opacity: 0
    +transform(translate(0, $y) perspective(200px) rotateX(-90deg) scale($scale))

/* == Content normalize ======================================================= */

.content
  +if-content
  +if-no-boundary-margins
  line-height: 1.6

  strong, h2, h3, h4
    font-family: exo, sans-serif
    font-weight: 700
    letter-spacing: 1px
    color: #333
    text-transform: uppercase
    font-size: 1.2em

  em
    color: #555
    font-style: normal
    font-family: exo, sans-serif
    font-weight: 700
    letter-spacing: 1px

  blockquote
    background: #fafafa
    border-bottom: solid 1px #ddd
    border-right: solid 1px #ddd
    padding: 20px

/* == Base styles ============================================================= */

html, td, textarea, input, button
  font-family: armata
  font-size: 9pt
  line-height: 1.5
  color: $txt

html
  background: $bg

html, body
  min-height: 100%

a
  color: #999
  text-decoration: none

.content a
  border-bottom: solid 1px rgba($txt, 0.1)

.content h2
  @extend %armata-700-caps
  font-size: 1.5em

.hide
  display: none

/* == Logo ==================================================================== */

#logo
  +if-position(0, 0, auto, 0, $position: fixed)
  z-index: 11

  > div
    @extend %page
    padding: 20px 0

  a
    position: relative
    width: 150px
    height: 79px
    overflow: hidden

  // Dark and light
  a > div
    +if-absolute(0, auto, auto, 0)
    overflow: hidden

  a .black
    z-index: 10

  a .white
    z-index: 11

/* == Main introduction ======================================================= */

header.intro
  background: #000 url(../images/bg.jpg) no-repeat
  background-size: 100% auto

  position: relative
  z-index: 5
  overflow: hidden

  >img
    +if-position(0, auto, auto, 0, $position: fixed)
    width: 100%

  >div
    @extend %page
    padding: 40px 0 100px $left-column
    position: relative
    z-index: 1

  // Text stuff
  &
    color: #666
    text-shadow: 1px 1px 2px rgba(black, 0.2)

  // Venue info (date)
  .info
    line-height: 1.5

    strong
      @extend %exo-700-caps
      font-size: 1.1em
      color: white
      display: block

    p
      margin-bottom: 20px

  // Speakers list
  .speakers
    margin-top: 50px

    +if-relative($left: -5px)

    font-size: 28pt
    text-transform: uppercase
    width: 500px
    line-height: 1.5
    color: white

    a
      color: white
      text-decoration: none
      border-bottom: dotted 1px rgba(white, 0.2)
      padding: 0 3px
      margin-right: 8px
      text-shadow: 3px 3px 0 rgba(black, 0.1)

    a:hover
      +border-radius(2px)
      background: rgba(white, 0.05)

  // Button
  .actions
    padding-top: 100px
    margin-left: -20px

    a.button
      background-color: #ddd
      display: inline-block
      padding: 12px 20px
      color: $txt
      @extend %exo-700-caps
      font-size: 1.1em
      +transition(all 300ms ease)
      border: solid 6px #ddd

      &:hover
        background-color: #fff
        border-color: #aaa


/* == Main navigation menu ==================================================== */

.intro + .main
  margin-top: -$nav-height - $nav-offset

nav.main
  &
    position: relative
    z-index: 5
    padding-top: $nav-offset

  > div
    @extend %page
    padding-left: $left-column - 20px

  // Lineheights
  a, &
    height: $nav-height
    line-height: $nav-height
    overflow: hidden

  // Primary
  .primary
    position: relative
    z-index: 1
    background: $menu-bg
    overflow: hidden

  .social, .primary
    float: left

  .social
    padding: 0 20px

  li, a
    display: block
    float: left

  // Each link
  a
    height: 40px
    line-height: 40px
    padding: 0 20px
    @extend %armata-700-caps
    color: $txt
    border-bottom: 0
    +transition(background-color 100ms linear)

  a:hover
    background-color: #eee

  // Caps
  // .primary li:first-child a
  //   padding-left: 30px
  // .primary li:last-child a
  //   padding-right: 30px

/* == Navigation background =================================================== */

nav.screen
  +if-position(0, 0, auto, 0, $position: fixed)
  height: 120px
  background: $menu-bg
  z-index: 2
  // +box-shadow(0 2px 10px rgba(black, 0.1), inset 0 3px 0 #111, inset 0 6px $line)
  +box-shadow(0 1px 0 rgba(black, 0.1), inset 0 3px 0 #111, inset 0 6px $line)

  > div
    @extend %page
    padding-top: 30px
    padding-left: $left-column
    line-height: 1.5

  p
    color: #aaa
    font-size: 12pt
    border-bottom: solid 1px $line
    padding-bottom: 8px

  strong
    @extend %exo-700-caps
    color: $txt
    margin-right: 5px

/* == Sections ================================================================ */

section
  padding: 60px 0
  position: relative
  // background: $bg
  // z-index: 2

  // The heading
  > hgroup
    @extend %page
    padding: 30px 0
    padding-left: $left-column

    // The text
    h1, h2, h3
      @extend %heading-type
      font-size: 32pt

      // background: $bg
      // position: relative
      // z-index: 6

    // The notch
    &:before
      content: ''
      display: block
      width: 26px
      height: 3px
      background: #888
      margin-bottom: 15px
      +border-radius(2px)

  // Display area
  .display
    background: $bg

  .area
    @extend %page
    padding-left: $left-column
    position: relative

  .tab .area
    // padding: 30px 0 30px $left-column // <- old paddings
    padding: 0 0 0 ($left-column - 30px)

  .tab
    +box-shadow(inset 0 10px 5px -5px rgba(black, 0.05))

  // Sidebar of display area
  aside
    position: absolute
    left: 0
    top: -20px
    width: $left-column - 30px
    z-index: 1

  aside > *
    margin-bottom: 30px
    +box-sizing(border-box)
    padding: 20px 0

  aside > h3
    background: #111
    padding: 20px
    color: white
    @extend %exo-700-caps
    font-size: 12pt
    line-height: 1.4

  // Navigation thingie
  aside nav
    background: #111

    a
      display: block
      padding: 8px 20px
      +transition(background-color 100ms linear)
      border-bottom: solid 1px rgba(white, 0.05)
      text-align: right

    a:hover
      background: rgba(white, 0.05)

    a.active
      background: rgba(white, 0.2)
      color: white

    li:last-child a
      border-bottom: 0

  // Nav lite
  aside nav.lite
    background: rgba(white, 0.8)

  // Card content
  .card
    background: white
    padding: 0 30px 60px 30px
    width: $card-width

  .slim
    width: $card-width
    +box-sizing(border-box)

  .side
    width: 350px
    float: right

/* == Content: Tickets ======================================================== */

/* Tickets sidebar */
.tickets aside
  &
    top: 0

  h3
    margin-top: 30px
    margin-bottom: 20px
    font-size: 1.1em

  h3 a
    color: white

  h3 strong
    font-size: 1.5em
    display: block

  ul, li
    margin: 0
    padding: 0

  ul a
    display: block
    background: #e7e7e7
    padding: 10px
    +box-sizing(border-box)
    color: #888

    margin-bottom: 20px
    font-size: 0.9em

    border-bottom: solid 1px #ddd

  ul a, ul a *
    +transition(all 100ms linear)

  ul a strong
    @extend %armata-700-caps
    font-size: 1.1em
    color: #333

    display: block
    padding-bottom: 5px
    margin-bottom: 5px
    border-bottom: solid 1px #ccc

  ul a:hover, a:active, a.active
    background: #111
    color: #888

    strong
      color: #fff
      border-bottom-color: #222

.tickets .tab
  min-height: 500px

.tickets .tab .area
  padding-top: 30px
  padding-left: $left-column


/* Tickets content area */
#tickets .content
  &.slim
    margin-top: 0
    width: $card-width

  h2, h3
    font-size: 1.5em
    text-transform: none

  ul, li
    margin: 0
    padding: 0
    list-style-type: none

  ul
    border-top: dotted 1px $line

  li
    border-bottom: dotted 1px $line
    padding: 5px 0

/* Conference pass */
#tickets .conference-pass
  ul
    @extend %clearfix

  ul, li
    margin: 0
    padding: 0
    list-style-type: none
    border: 0

  li strong, li em
    display: block
    text-align: right

  // Price
  li strong
    @extend %exo-700-caps
    font-size: 18pt
    text-shadow: 2px 2px 0 #eee

  // Subtext
  li em
    font-style: normal
    @extend %armata-700-caps

  li
    width: 50%
    +box-sizing(border-box)
    float: left
    line-height: 1.3

  li:first-child
    +box-shadow(inset -1px 0 0 $line)
    padding-right: 20px

  li:last-child
    strong
      color: #999

    em
      color: #aaa

/* Ticket images */
#tickets .tickets
  &
    margin-top: 50px
    position: relative

  img
    width: 320px
    height: 320px * 0.610
    +box-shadow(0 6px 18px rgba(black, 0.2))
    position: absolute
    +transition(transform 400ms ease-in-out, right 400ms ease-in-out, top 400ms ease-in-out, opacity 400ms ease-in-out)

  img.pro
    right: 0
    top: 0
    z-index: 0
    +box-shadow(0 6px 18px rgba(black, 0.4))
    +transform(rotate(4deg))

  img.student
    right: -30px
    top: 90px
    z-index: 1
    +transform(rotate(-4deg))

  &:hover
    img.pro
      top: 10px
      +transform(rotate(-4deg) scale(1.1))

    img.student
      top: 140px
      +transform(rotate(-8deg) perspective(700px) rotateX(-40deg))
      opacity: 0

/* == Content: Contact us ===================================================== */

#contact
  .display
    background: #222
    color: white
    padding: 200px 0

/* == Footer ================================================================== */

#footer
  &
    margin-top: 50px

  > div
    @extend %page
    height: 444px
    background: url(../images/footer.jpg) 100px bottom no-repeat
    position: relative

  p .copy
    font-size: 48px
    float: left
    margin-right: 20px
    color: #ddd
    line-height: 1
    display: block

  p
    width: 350px
    overflow: hidden
    position: absolute
    bottom: 50px
    right: 110px
    font-size: 0.9em
    line-height: 1.5

    color: #999

    strong
      font-weight: normal
      color: $txt


/* == Content: Work =========================================================== */

@-webkit-keyframes drift
  0%
    background-position: 0 0
  100%
    background-position: -1000px 0


.speakers .tab
  -webkit-animation-name: drift
  -webkit-animation-duration: 90s
  -webkit-animation-iteration-count: infinite
  -webkit-animation-timing-function: linear

  background-size: 1000px auto

/* The card */
.speakers .card
  &
    box-shadow: 5px 5px 0 rgba(black, 0.1)
    background: transparent
    padding: 0
    position: relative

  // Links
  nav
    +if-absolute(12px, 22px, auto, auto)
    z-index: 1

    ul, li
      margin: 0
      padding: 0
      list-style-type: none

    li, a
      float: left

    a
      +transition(opacity 200ms linear)

      display: block
      width: 24px
      height: 24px
      margin-left: 8px

      text-indent: -9999px
      background-image: url(../images/sprite/icon-link.png)
      background-size: 16px auto
      background-position: center center
      background-repeat: no-repeat

      opacity: 0.6
      border: 0

    a[href*=vimeo]
      background-image: url(../images/sprite/icon-vimeo.png)
    a[href*=deviantart]
      background-image: url(../images/sprite/icon-da.png)
    a[href*=twitter]
      background-image: url(../images/sprite/icon-twitter.png)
    a[href*=dribbble]
      background-image: url(../images/sprite/icon-dribbble.png)
    a[href*=facebook]
      background-image: url(../images/sprite/icon-facebook.png)
    a[href*=youtube]
      background-image: url(../images/sprite/icon-youtube.png)

    a:hover
      +transition(none)
      opacity: 1


  // The segments
  header
    padding: 0 30px 30px 30px

  .body
    padding: 30px 30px 60px 30px
    background: rgba(#111, 0.9)
    color: #ccc

  header
    background: $bg

  // The heading styles
  header h2, header h3, header h5
    margin: 0

  header h2
    @extend %armata-700-caps
    font-size: 20pt
    color: #333
    text-shadow: 3px 3px 0 #eee

  // Speaker
  header h5
    margin-top: -3px
    @extend %exo-700-caps
    font-size: 9pt
    color: #999

  // What we do
  header h3
    @extend %armata-700-caps
    margin-top: 10px
    padding-top: 10px
    border-top: solid 1px $line
    color: #999
    font-size: 13pt

/* == Animations ============================================================== */

body
  -webkit-backface-visibility: hidden

.fly
  +transition(all 400ms $snap-out)

.fly.in
  opacity: 0
  +transform-origin(-200% 50%)
  +transform(translate(-50px, 0))

.fly.out
  +transition(all 200ms $snap-in)
  opacity: 0
  +transform-origin(-200% 50%)
  +transform(translate(-50px, 0))

/* == It's the final countdown! =============================================== */

.countdown
  &
    margin: 90px 0 60px 0
    background: url(../images/fiddlesticks.png) center center repeat-x

  > div
    @extend %page
    padding-left: $left-column

  // Don't miss it!
  header
    line-height: 1.5
    width: $card-width
    margin-bottom: 30px

    h3
      font-family: exo, sans-serif
      font-weight: 700
      font-size: 32pt
      color: $black
      margin-bottom: -3px

    p
      font-size: 12pt
      color: #888

  // Big day
  .box.days
    margin-bottom: 50px
    font-family: exo, sans-serif
    font-weight: 700
    font-size: 80pt

    strong
      text-shadow: 4px 4px 0 #ccc
      color: $black

    small
      position: relative
      top: 4px
      color: #ccc
      display: inline-block
      width: 500px

      height: 1em
      vertical-align: bottom

    small span
      position: absolute
      left: 0
      top: 0
      @include flipme($y: 50px)

  // Animation
  .box
    strong
      @include flipme($y: 20px, $scale: 0.9)

  // Others
  .box.hours, .box.minutes, .box.seconds
    width: ($card-width + 30px) / 3 - 30px
    margin-right: 30px
    float: left
    position: relative
    height: 70px

    strong
      display: block
      height: 36px
      line-height: 36px
      font-size: 36px
      text-shadow: 2px 2px 0 rgba(black, 0.1)

      position: absolute
      left: 0
      top: 0

    small
      display: block

      position: absolute
      left: 0
      top: 50px

      @extend %armata-700-caps
      color: #aaa
